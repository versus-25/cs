
## Сети  
1. **A**ll - Application
2. **P**eople - Presentation
3. **S**eem - Session
4. **T**o - Transport
5. **N**eed - Network
6. **D**ata - Data link
7. **P**rocessing Phisical

<img width="489" alt="Снимок экрана 2022-12-24 в 16 37 05" src="https://user-images.githubusercontent.com/53166911/209436538-e87d0b2a-718a-425d-b49c-32a68fac1790.png">

<img width="399" alt="Снимок экрана 2022-12-24 в 16 44 37" src="https://user-images.githubusercontent.com/53166911/209436754-2d6e53c6-4fe7-4701-8e1c-e5bd0e97538b.png">

### Уровни OSI
- протокол второго или канального уровня
- протокол третьего или сетевого уровня
- протокол четвертого или транспортного уровня

### PDU PROTOCOL DATA UNIT - блок данных протокола. На каждом уровне он имеет свое название
- канальный PDU - фрейм
- сетевой PDU - пакет
- транспортный PDU - сегмент или датаграмма

### Устройства концепции:
- L2 switch коммутатор второго уровня
- L3 router - роутер третьего уровня
- L4/L7 load balancer - балансировщик нагрузки на транспортном или на уровне приложений

### Сокращения
- TCP Ntransmission Control Protocol протокол управления передачей данных
- UDP User Datagram Protocol протокол пользовательских датаграм
- Mac Media access Control протокол управления доступом к среде
- Ip Internet Protocol v4/v6 протокол для межсетевых соединений
- ARP Address Resolution Protocol протокол для сопоставления ipv4 и Mac
- NDP Neighbour Discovery Protocol - протокол TCP /IP для IPv6 или замена ARP v4
- ICMP Internet Control Message протокол межсетевых управляющих сообщений
- DHCP Dynaic Host Configuration Protocol - протокол динамического конфигурирования хостов

<img width="494" alt="Снимок экрана 2022-12-24 в 17 38 54" src="https://user-images.githubusercontent.com/53166911/209438470-6d54b23d-91ef-4eb2-958f-c992de74d0ba.png">

<img width="494" alt="Снимок экрана 2022-12-24 в 17 41 59" src="https://user-images.githubusercontent.com/53166911/209438555-07aa40e4-167a-4e8c-8064-235dc38169a0.png">

<img width="494" alt="Снимок экрана 2022-12-24 в 17 47 08" src="https://user-images.githubusercontent.com/53166911/209438720-038e2a34-d386-4dae-b25b-ce37bf1f6a26.png">

<img width="490" alt="Снимок экрана 2022-12-24 в 17 54 13" src="https://user-images.githubusercontent.com/53166911/209438921-d4d2fab4-e685-4743-99e9-6e0694ec5707.png">

ipv4 4 разряда по 8 бит или 256 вариантов
8 бит это 8 мест для 0 или 1
2**7 2**6 2**5 2**4 2**3 2**2 2**1 2**0  
-128 --64 --32 --16 ---8 ---4 ---2 ---1
складываются все установленные биты
пример 00010010 = 16 + 2 = 18

### маска подсети CIDR
- 10.0.2.15/24  
/24 - 24 бита из 32 это адрес сети(значит первые 24 бита установлены в 1 и остальные в 0 или 1111 1111 1111 0000), 8 - хвостовая часть
раньше была классовая нотация - цеть определялась по последнему октету - на примере выше 15  
маска  
 255  255  255   0  
ip  
 192  168    0  10  
или в десятичной маска  
11111111 11111111 11111111 00000000  
ip  
11000000 10101000 00000000 00001010  
По логическому **И** получаем подсеть   
11000000 10101000 00000000 00000000  
или подсеть в десятичной  
192 168 0 0  

Пример 2  
маска /19  
 255  255  224   0  
ip  
 64  233    160  0  
или в десятичной маска  
11111111 11111111 11110000 00000000  
ip  
01000000 11101001 10100001 10001010  
По логическому **И** получаем подсеть   
01000000 11101001 10100000 00000000  
или подсеть в десятичной  
64 233 160 0  


#### TC window size  - рахмер окна rwnd  
Если дожидаться подтверждения отправки/получения каждого tcp-сегмента, то скорость будет невысокой, пример 
30мс RTT(round-trip time или время пинга) имея MTU 9000байт  
за 30 секунд 8960байт за 1000мс - 292кбайт/с  

Можно не дожидаться доставки всех сегментов. Окно(0 - 65535) - это количество сегментов отправляемых без ожидания подтверждения всех сегментов. после получения нового подтверждения нового сегмента передается новый сегмент.  
**Flow control** - при передаче от 10 гигабитного хоста 1гигабитному размер рамки не позволит линк больше 1гигабита.  
**Congestion control** контроль заторов, размер окна cwnd

добавляем сеть
ip, netns - инструменты управления сетевыми неймспейсами  
ip link add veth-host type veth peer veth-ns добавить сеть veth - veth-ns (неймспейс - хост, цифровой вариант витой пары)  
ip link set veth-ns netns  
ip netns exec demoapp ip link set veth-ns up - поднимаем сетевой интерфейс для неймспейса и аналогично для хоста  
ip addr add 169.254.1.1/30 dev veth-host. 

ip link add veth-host type veth peer veth-ns добавить сеть veth - veth-ns (неймспейс - хост, цифровой вариант витой пары)
